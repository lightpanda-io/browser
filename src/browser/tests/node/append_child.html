<!DOCTYPE html>
<script src="../testing.js"></script>
<div id=d1></div>
<div id=d2><p id=p1></p></div>

<script id=appendChild>
  function assertChildren(expected, parent) {
    const actual = Array.from(parent.childNodes).map((n) => n.id);
    testing.expectEqual(expected, actual)
    for (let child of parent.childNodes) {
      testing.expectEqual(parent, child.parentNode);
    }
  }
  const d1 = $('#d1');
  const d2 = $('#d2');
  const p1 = $('#p1');

  assertChildren([], d1);
  assertChildren(['p1'], d2);

  d1.appendChild(p1);

  assertChildren(['p1'], d1);
  assertChildren([], d2);

  const p2 = document.createElement('p');
  p2.id = 'p2';
  d1.appendChild(p2);
  assertChildren(['p1', 'p2'], d1);
</script>
